<div class="scrollmenu-wrapper"></div>
<div class="scrollmenu">
  <div class="scrollbox text-center" id="user-scrollbox">
    <div>
      <%= link_to user_path(current_user), class: "scrollmenu-link details-link" do %>
        <h3>Me</h3>
      <% end %>
    </div>
    <div class="scrollitem <%= 'active' if params[:controller] == 'users' %>">
      <%= link_to user_path(current_user), class: 'scrollmenu-me' do %>
        <% if current_user.profile_picture %>
          <%= cl_image_tag(current_user.profile_picture.path, transformation: [{width: 70, height: 70, gravity: "face", radius: "max", crop: "fill"}]) %>
        <% else %>
          <div class="menu-icon placeholder">
            <!-- <i class="fa fa-user-o" aria-hidden="true"></i> -->
          </div>
        <% end %>
        <h4><%= @user.first_name %></h4>
      <% end %>
    </div>
  </div>

  <% if !@user.assignees.where('relationship = ?', 'Partner').empty? %>
    <div class="scrollbox text-center">
      <div>
        <%= link_to user_assignee_path(current_user, @user.partner.id), class: "scrollmenu-link partner-link" do %>
          <h3>Partner</h3>
        <% end %>
      </div>
      <% @user.assignees.where('relationship = ?', 'Partner').each do |recipient| %>
        <div class="scrollitem <%= 'active' if @recipient && @recipient.id == recipient.id %>">
          <%= link_to user_recipient_path(current_user, recipient), class: 'scrollmenu-partner' do %>
            <% if recipient.profile_picture %>
              <%= cl_image_tag(recipient.profile_picture.path, transformation: [{width: 70, height: 70, gravity: "face", radius: "max", crop: "fill"}]) %>
            <% else %>
              <div class="menu-icon placeholder">
                <!-- <i class="fa fa-user-o" aria-hidden="true"></i> -->
              </div>
            <% end %>
            <h4><%= recipient.first_name %></h4>
            <h6><%= recipient.id %></h6>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if !@user.children.empty? %>
    <div class="scrollbox">
      <div>
        <%= link_to user_children_path(current_user), class: "scrollmenu-link children-link" do %>
          <h3>Children</h3>
        <% end %>
      </div>
      <% @user.children.each do |recipient| %>
        <div class="scrollitem <%= 'active' if @recipient && @recipient.id == recipient.id %>">
          <%= link_to user_recipient_path(current_user, recipient),class: 'scrollmenu-children' do %>
            <% if recipient.profile_picture %>
              <%= cl_image_tag(recipient.profile_picture.path, transformation: [{width: 70, height: 70, gravity: "face", radius: "max", crop: "fill"}]) %>
            <% else %>
              <div class="menu-icon placeholder">
                <!-- <i class="fa fa-user-o" aria-hidden="true"></i> -->
              </div>
            <% end %>
            <h4><%= recipient.first_name %></h4>
            <h6><%= recipient.id %></h6>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if !@user.guardians.empty? %>
    <div class="scrollbox">
      <div>
        <%= link_to user_guardians_path(current_user), class: "scrollmenu-link guardian-link" do %>
          <h3>Guardians</h3>
        <% end %>
      </div>
      <% @user.guardians.each do |guardian| %>
        <div class="scrollitem <%= 'active' if @guardian && @guardian.id == guardian.id %>">
          <%= link_to user_guardian_path(current_user, guardian), class: 'scrollmenu-guardians' do %>
            <% if guardian.profile_picture %>
              <%= cl_image_tag(guardian.profile_picture.path, transformation: [{width: 70, height: 70, gravity: "face", radius: "max", crop: "fill"}]) %>
            <% else %>
              <div class="menu-icon placeholder">
                <!-- <i class="fa fa-user-o" aria-hidden="true"></i> -->
              </div>
            <% end %>
            <h4><%= guardian.first_name %></h4>
            <h6><%= guardian.id %></h6>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="scrollbox">
    <div>
      <%= link_to user_proofs_path(current_user), class: "scrollmenu-link digital-link" do %>
        <h3>Digital Assets</h3>
      <% end %>
    </div>
    <div class="scrollitem <%= 'active' if params[:controller] == 'proofs' %>">
      <%= link_to user_proofs_path(current_user), class: "margin-auto" do %>
        <div class="menu-icon">
          <i class="fa fa-home" aria-hidden="true"></i>
        </div>
        <h4>Proof of Residency</h4>
      <% end %>
    </div>
    <div class="scrollitem digital-asset <%= 'active' if params[:controller] == 'notes' %>">
      <%= link_to user_notes_path(current_user), class: "margin-auto" do %>
        <div class="menu-icon">
          <i class="fa fa-pencil-square-o" id="note-menu-icon" aria-hidden="true"></i>
        </div>
        <h4>My Notes</h4>
      <% end %>
    </div>
  </div>
</div>

<% content_for(:after_js) do %>
  <script>
    // // Clicking on links on profile/scrollmenu tab loads tab content
    // $('.details-link').click(function(e){
    //   e.preventDefault();
    //   $('.sidebar-tabs').children().removeClass('active');
    //   $('#personal-details-sidebar-tab').addClass('active')
    //   $.ajax({
    //       type: "GET",
    //       url: <%= @user.id %> + "/edit",
    //       data: { },
    //       success: function(data){
    //           $('#tab-content').empty().html(data);
    //       }
    //   });
    // });

    // $('.children-link').click(function(e){
    //   e.preventDefault();
    //   $.ajax({
    //       type: "GET",
    //       url: <%= @user.id %> + "/children",
    //       data: { },
    //       success: function(data){
    //           $('#tab-content').empty().html(data);
    //       }
    //   });
    // });
    // $('.guardian-link').click(function(e){
    //   e.preventDefault();
    //   $.ajax({
    //       type: "GET",
    //       url: <%= @user.id %> + "/guardians",
    //       data: { },
    //       success: function(data){
    //           $('#tab-content').empty().html(data);
    //       }
    //   });
    // });
    // $('.notes-link').click(function(e){
    //   e.preventDefault();
    //   $.ajax({
    //       type: "GET",
    //       url: <%= @user.id %> + "/notes",
    //       data: { },
    //       success: function(data){
    //           $('#tab-content').empty().html(data);
    //       }
    //   });
    // });
    // $('.digital-link').click(function(e){
    //   e.preventDefault();
    //   $.ajax({
    //       type: "GET",
    //       url: <%= @user.id %> + "/digital",
    //       data: { },
    //       success: function(data){
    //           $('#tab-content').empty().html(data);
    //       }
    //   });
    // });
  </script>
<% end %>
