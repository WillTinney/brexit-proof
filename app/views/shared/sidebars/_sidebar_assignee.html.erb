<!-- Sidebar for assignee show page on dashboard -->
<div class="sidebar">
  <div class="sidebar-header text-center">
    <h4><strong><%= @assignee.first_name %></strong></h4>
  </div>
  <div class="sidebar-tabs">
    <%= link_to '#',
      class: "sidebar-tab sidebar-tab-header active",
      id: "show-profile-sidebar-tab",
      remote: true do %>
      <% if @assignee.first_name[-1] == "s" %>
        <h5><strong><%= @assignee.first_name %>' Profile</strong></h5>
      <% else %>
        <h5><strong><%= @assignee.first_name %>'s Profile</strong></h5>
      <% end %>
    <% end %>

    <hr>

    <%= link_to '#',
        class: "sidebar-tab profile-tab",
        id: "show-details-sidebar-tab" do %>
      <h5><i class="fa fa-user" aria-hidden="true"></i> Details</h5>
    <% end %>

    <hr>

    <%= link_to '#',
        class: "sidebar-tab profile-tab",
        id: "show-notes-sidebar-tab" do %>
      <h5><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Notes</h5>
    <% end %>

  </div>
</div>

<% content_for(:after_js) do %>
  <script>
    // Clicking on a different tab changes the content shown on the page
    // $('.sidebar-tab').on('click', function(event){
    //   $('.sidebar-tabs').children().removeClass("active");
    //   $(this).addClass("active");
    //   var childIndex = $(this).index();
    //   $('#tab-content').children().addClass("hidden");
    //   $('.' + childIndex).removeClass("hidden");
    //   window.location.hash = $(this).attr('id').split("-")[0];
    // });

    // Clicking on details tab changes progress
    $('#show-profile-sidebar-tab').on('click', function(e){
      $('.sidebar-tabs').children().removeClass("active");
      $(this).addClass("active");

      var current = $('.current').attr('id').slice(-1);
      if (current == 3) {
        step_process(3,1);
      }
      else if (current == 5) {
        step_process(5,1);
      }
    })

    // Clicking on details tab changes progress
    $('#show-details-sidebar-tab').on('click', function(e){
      $('.sidebar-tabs').children().removeClass("active");
      $(this).addClass("active");

      var current = $('.current').attr('id').slice(-1);
      if (current == 1) {
        step_process(1,3);
      }
      else if (current == 5) {
        step_process(5,3);
      }
    });

    // Clicking on notes tab changes progress
    $('#show-notes-sidebar-tab').on('click', function(e){
      $('.sidebar-tabs').children().removeClass("active");
      $(this).addClass("active");

      var current = $('.current').attr('id').slice(-1);
      if (current == 1) {
        step_process(1,5);
      }
      else if (current == 3) {
        step_process(3,5);
      }
    });

  </script>
<% end %>
