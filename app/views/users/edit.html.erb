<div>
  <%= link_to '#', class: 'profile-picture-inline' do %>
    <% if @user.profile_picture %>
      <%= cl_image_tag(@user.profile_picture.path, transformation: [{width: 120, height: 120, gravity: "face", radius: "max", crop: "fill"}], class: "avatar-large") %>
    <% else %>
      <div class="edit-placeholder"></div>
    <% end %>
    <p>Change Picture</p>
    <%= simple_form_for @user, html: {class: 'form-inline edit-profile-picture invisible'} do |f| %>
      <%= f.input :profile_picture, as: :attachinary, label: false, input_html: { class: 'profile-upload'} %>
      <%= f.submit "Upload", class: 'profile-upload'  %>
    <% end %>
  <% end %>
</div>

<%= simple_form_for(@user) do |f| %>
  <div class="form-container">
    <div class="row">
      <div class="col-xs-12 col-sm-4">
        <%= f.input :title, collection: ["Mr", "Mrs", "Ms"] %>
      </div>
      <div class="col-xs-12 col-sm-8">
        <%= f.input :email %>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12 col-sm-4">
        <%= f.input :first_name %>
      </div>
      <div class="col-xs-12 col-sm-4">
        <%= f.input :middle_name %>
      </div>
      <div class="col-xs-12 col-sm-4">
        <%= f.input :last_name %>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12 col-sm-4">
        <%= f.input :citizenship, collection: Nationality::NATIONALITY %>
      </div>
      <div class="col-xs-12 col-sm-4 date-of-birth">
        <%= f.input :date_of_birth, as: :string, input_html: {type: :date} %>
      </div>
      <div class="col-xs-12 col-sm-4">
        <%= f.input :phone_number %>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12 col-sm-6">
        <%= f.input :address_line_1, input_html: { id: "user_address"} %>
      </div>
      <div class="col-xs-12 col-sm-6">
        <%= f.input :address_line_2 %>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12 col-sm-4">
        <%= f.input :city %>
      </div>
      <div class="col-xs-12 col-sm-4">
        <%= f.input :postcode %>
      </div>
      <div class="col-xs-12 col-sm-4">
        <%= f.input :country, priority: ["United Kingdom"] %>
      </div>
    </div>

    <div class="nav-buttons">
      <%= link_to "Back", user_profile_path(current_user), class: "back-button" %>
      <%= f.button :submit, "Save", class: "purple-button" %>
    </div>
  </div>
<% end %>

<%= content_for(:after_js) do %>
  <script src="https://maps.googleapis.com/maps/api/js?libraries=places&amp;key=<%= ENV['GOOGLE_API_BROWSER_KEY'] %>"></script>
  <script>
    $('.profile-picture-inline').click(function(e) {
      e.preventDefault;
      console.log('hello')
      $('.edit-profile-picture').removeClass('invisible');
    });
  </script>
<% end %>

<%= content_for(:after_js) do %>

<% end %>
